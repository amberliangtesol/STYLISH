{"ast":null,"code":"import _objectSpread from\"/Users/amber/Front-End-Class-Batch19/stylish/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"/Users/amber/Front-End-Class-Batch19/stylish/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/amber/Front-End-Class-Batch19/stylish/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Product(_ref){var _posts$data$variants$;var setTotalProduct=_ref.setTotalProduct;var urlParams=new URLSearchParams(window.location.search);var id=urlParams.get(\"id\");var productUrl=\"https://api.appworks-school.tw/api/1.0/products/details?id=\".concat(id);var _useState=useState(),_useState2=_slicedToArray(_useState,2),posts=_useState2[0],setPosts=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),selectedColor=_useState4[0],setSelectedColor=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),selectedSize=_useState6[0],setSelectedSize=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),selectedQuantity=_useState8[0],setSelectedQuantity=_useState8[1];var localStorageStock=JSON.parse(localStorage.getItem(\"cart\"))||[];// console.log(\"localStorageStock\",localStorageStock);\nvar maxStock=selectedColor!==null&&selectedColor!==void 0&&selectedColor.code&&selectedSize?(_posts$data$variants$=posts.data.variants.find(function(variant){return variant.color_code===selectedColor.code&&variant.size===selectedSize;}))===null||_posts$data$variants$===void 0?void 0:_posts$data$variants$.stock:0;//console.log({ maxStock, selectedColor, selectedSize, selectedQuantity });\nfunction handleColorClick(selectedColor){setSelectedColor(selectedColor);}function handleSizeClick(selectedSize){setSelectedSize(selectedSize);}function handleQuantityClick(plusOrMinus,maxStock){maxStock=Number(maxStock);if(plusOrMinus===\"plus\"&&selectedQuantity<(maxStock||0)){setSelectedQuantity(selectedQuantity+1);}else if(plusOrMinus===\"minus\"&&selectedQuantity>0){setSelectedQuantity(selectedQuantity-1);}}function handleAddtoCart(){if(selectedColor!==undefined&&selectedSize!==null&&selectedQuantity!==0){//console.log(\"按下加入購物車\");\nvar item={id:posts.data.id,img:posts.data.main_image,name:posts.data.title,price:posts.data.price,color:selectedColor,size:selectedSize,qty:selectedQuantity};//console.log(\"item:\",item);\nvar cart=JSON.parse(localStorage.getItem(\"cart\"))||[];var cartItemIndex=cart.findIndex(function(cartItem){return cartItem.id===item.id&&cartItem.color.code===item.color.code&&cartItem.size===item.size;});var updatedCart;if(cartItemIndex===-1){updatedCart=[].concat(_toConsumableArray(cart),[item]);}else{updatedCart=_toConsumableArray(cart);updatedCart[cartItemIndex].qty+=item.qty;}localStorage.setItem(\"cart\",JSON.stringify(updatedCart));var totalQuantity=updatedCart.reduce(function(total,i){return total+i.qty;},0);setTotalProduct(totalQuantity);var newPosts=_objectSpread({},posts);var variantIndex=newPosts.data.variants.findIndex(function(variant){return variant.color_code===selectedColor.code&&variant.size===selectedSize;});if(variantIndex!==-1){newPosts.data.variants[variantIndex].stock-=selectedQuantity;// setMaxStock(newPosts.data.variants[variantIndex].stock);\n}setPosts(newPosts);}setSelectedColor(null);setSelectedSize(null);setSelectedQuantity(0);}useEffect(function(){fetch(productUrl).then(function(response){return response.json();}).then(function(response){//console.log(\"response.data.vatriants\",response.data.variants);\nvar updatedVariants=response.data.variants.map(function(variant){var itemFromLocalstorage=localStorageStock.find(function(stock){return stock.color.code===variant.color_code&&stock.size===variant.size;});if(itemFromLocalstorage){var updatedStock=variant.stock-itemFromLocalstorage.qty;return _objectSpread(_objectSpread({},variant),{},{stock:updatedStock});}else{return variant;}});var updatedPosts={data:_objectSpread(_objectSpread({},response.data),{},{variants:updatedVariants})};//console.log({ updatedPosts })\nsetPosts(updatedPosts);}).catch(function(err){console.log(err.message);});},[]);if(posts===undefined){return null;}return/*#__PURE__*/_jsxs(\"section\",{className:\"product\",children:[/*#__PURE__*/_jsxs(\"section\",{className:\"product-top\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"product-image-top\",src:posts.data.main_image,alt:\"product\"}),/*#__PURE__*/_jsx(\"div\",{className:\"product-info\",children:/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{className:\"product-name\",children:posts.data.title}),/*#__PURE__*/_jsx(\"li\",{className:\"product-id\",children:posts.data.id}),/*#__PURE__*/_jsxs(\"li\",{className:\"product-price\",children:[\"TWD.\",posts.data.price]}),/*#__PURE__*/_jsx(\"li\",{className:\"split1\"}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"ul\",{className:\"product-color\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u984F\\u8272\\uFF5C\"}),posts.data.colors.map(function(color,index){return/*#__PURE__*/_jsx(\"li\",{className:\"colorblock \".concat(selectedColor===color?\"active\":\"\"),style:{backgroundColor:\"#\"+color.code},onClick:function onClick(){return handleColorClick(color);}},index);})]})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"ul\",{className:\"product-size\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u5C3A\\u5BF8\\uFF5C\"}),posts.data.sizes.map(function(size,index){return/*#__PURE__*/_jsx(\"li\",{className:\"size \".concat(selectedColor&&posts.data.variants.find(function(variant){return variant.color_code===selectedColor.code&&variant.size===size;}).stock>0?\"\":\"out-of-stock\",\" \").concat(selectedSize===size?\"active\":\"\"),onClick:function onClick(){handleSizeClick(size);setSelectedQuantity(0);},children:size},index);})]})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"ul\",{className:\"product-in-stock\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\u6578\\u91CF\\uFF5C\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"quantity-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"minus\",type:\"button\",onClick:function onClick(){return handleQuantityClick(\"minus\");},children:\"-\"}),/*#__PURE__*/_jsx(\"div\",{className:\"quantity\",children:selectedQuantity}),/*#__PURE__*/_jsx(\"div\",{className:\"plus\",type:\"button\",onClick:function onClick(){return handleQuantityClick(\"plus\",maxStock);},children:\"+\"})]})]})}),/*#__PURE__*/_jsx(\"button\",{className:\"add-to-cart\",onClick:handleAddtoCart,style:{cursor:selectedColor===undefined||selectedSize===null||selectedQuantity===0?\"not-allowed\":\"pointer\"},children:\"\\u52A0\\u5165\\u8CFC\\u7269\\u8ECA\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-detail\",children:[posts.data.note,/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),posts.data.texture,/*#__PURE__*/_jsx(\"br\",{}),posts.data.description.split(\"\\r\\n\")[0],/*#__PURE__*/_jsx(\"br\",{}),posts.data.description.split(\"\\r\\n\")[1],/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),\"\\u6E05\\u6D17\\uFF1A\",posts.data.wash,/*#__PURE__*/_jsx(\"br\",{}),\"\\u7522\\u5730\\uFF1A\",posts.data.place]})]})})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"product-bottom\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"more-info\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"more-info-p\",children:\"\\u66F4\\u591A\\u7522\\u54C1\\u8CC7\\u8A0A\"}),/*#__PURE__*/_jsx(\"div\",{className:\"split2\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"description\",children:posts.data.story}),/*#__PURE__*/_jsx(\"div\",{className:\"product-images-bottom\",children:posts.data.images.map(function(image,index){return/*#__PURE__*/_jsx(\"img\",{className:\"product-image-bottom\",src:image,alt:\"product\"},index);})})]})]});}export default Product;","map":{"version":3,"names":["React","useState","useEffect","Product","setTotalProduct","urlParams","URLSearchParams","window","location","search","id","get","productUrl","posts","setPosts","selectedColor","setSelectedColor","selectedSize","setSelectedSize","selectedQuantity","setSelectedQuantity","localStorageStock","JSON","parse","localStorage","getItem","maxStock","code","data","variants","find","variant","color_code","size","stock","handleColorClick","handleSizeClick","handleQuantityClick","plusOrMinus","Number","handleAddtoCart","undefined","item","img","main_image","name","title","price","color","qty","cart","cartItemIndex","findIndex","cartItem","updatedCart","setItem","stringify","totalQuantity","reduce","total","i","newPosts","variantIndex","fetch","then","response","json","updatedVariants","map","itemFromLocalstorage","updatedStock","updatedPosts","catch","err","console","log","message","colors","index","backgroundColor","sizes","cursor","note","texture","description","split","wash","place","story","images","image"],"sources":["/Users/amber/Front-End-Class-Batch19/stylish/src/components/Product.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\n\nfunction Product({ setTotalProduct }) {\n  const urlParams = new URLSearchParams(window.location.search);\n  const id = urlParams.get(\"id\");\n  const productUrl = `https://api.appworks-school.tw/api/1.0/products/details?id=${id}`;\n  const [posts, setPosts] = useState();\n  const [selectedColor, setSelectedColor] = useState(null);\n  const [selectedSize, setSelectedSize] = useState(null);\n  const [selectedQuantity, setSelectedQuantity] = useState(0);\n  const localStorageStock = JSON.parse(localStorage.getItem(\"cart\")) || [];\n  // console.log(\"localStorageStock\",localStorageStock);\n  const maxStock =\n    selectedColor?.code && selectedSize\n      ? posts.data.variants.find(\n          (variant) =>\n            variant.color_code === selectedColor.code &&\n            variant.size === selectedSize\n        )?.stock\n      : 0;\n\n  //console.log({ maxStock, selectedColor, selectedSize, selectedQuantity });\n\n  function handleColorClick(selectedColor) {\n    setSelectedColor(selectedColor);\n  }\n\n  function handleSizeClick(selectedSize) {\n    setSelectedSize(selectedSize);\n  }\n\n  function handleQuantityClick(plusOrMinus, maxStock) {\n    maxStock = Number(maxStock);\n    if (plusOrMinus === \"plus\" && selectedQuantity < (maxStock || 0)) {\n      setSelectedQuantity(selectedQuantity + 1);\n    } else if (plusOrMinus === \"minus\" && selectedQuantity > 0) {\n      setSelectedQuantity(selectedQuantity - 1);\n    }\n  }\n\n  function handleAddtoCart() {\n    if (\n      selectedColor !== undefined &&\n      selectedSize !== null &&\n      selectedQuantity !== 0\n    ) {\n      //console.log(\"按下加入購物車\");\n      const item = {\n        id: posts.data.id,\n        img: posts.data.main_image,\n        name: posts.data.title,\n        price: posts.data.price,\n        color: selectedColor,\n        size: selectedSize,\n        qty: selectedQuantity,\n      };\n      //console.log(\"item:\",item);\n\n      const cart = JSON.parse(localStorage.getItem(\"cart\")) || [];\n\n      const cartItemIndex = cart.findIndex(\n        (cartItem) =>\n          cartItem.id === item.id &&\n          cartItem.color.code === item.color.code &&\n          cartItem.size === item.size\n      );\n\n      let updatedCart;\n      if (cartItemIndex === -1) {\n        updatedCart = [...cart, item];\n      } else {\n        updatedCart = [...cart];\n        updatedCart[cartItemIndex].qty += item.qty;\n      }\n\n      localStorage.setItem(\"cart\", JSON.stringify(updatedCart));\n\n      const totalQuantity = updatedCart.reduce((total, i) => total + i.qty, 0);\n      setTotalProduct(totalQuantity);\n\n      const newPosts = { ...posts };\n      const variantIndex = newPosts.data.variants.findIndex(\n        (variant) =>\n          variant.color_code === selectedColor.code &&\n          variant.size === selectedSize\n      );\n      if (variantIndex !== -1) {\n        newPosts.data.variants[variantIndex].stock -= selectedQuantity;\n        // setMaxStock(newPosts.data.variants[variantIndex].stock);\n      }\n      setPosts(newPosts);\n    }\n    setSelectedColor(null);\n    setSelectedSize(null);\n    setSelectedQuantity(0);\n  }\n\n  useEffect(() => {\n    fetch(productUrl)\n      .then((response) => response.json())\n      .then((response) => {\n        //console.log(\"response.data.vatriants\",response.data.variants);\n        const updatedVariants = response.data.variants.map(function (variant) {\n          const itemFromLocalstorage = localStorageStock.find(\n            (stock) =>\n              stock.color.code === variant.color_code &&\n              stock.size === variant.size\n          );\n\n          if (itemFromLocalstorage) {\n            let updatedStock = variant.stock - itemFromLocalstorage.qty;\n            return {\n              ...variant,\n              stock: updatedStock,\n            };\n          } else {\n            return variant;\n          }\n        });\n\n        const updatedPosts = {\n          data: {\n            ...response.data,\n            variants: updatedVariants,\n          },\n        };\n\n        //console.log({ updatedPosts })\n\n        setPosts(updatedPosts);\n      })\n      .catch((err) => {\n        console.log(err.message);\n      });\n  }, []);\n\n  if (posts === undefined) {\n    return null;\n  }\n\n  return (\n    <section className=\"product\">\n      <section className=\"product-top\">\n        <img\n          className=\"product-image-top\"\n          src={posts.data.main_image}\n          alt=\"product\"\n        />\n        <div className=\"product-info\">\n          <ul>\n            <li className=\"product-name\">{posts.data.title}</li>\n            <li className=\"product-id\">{posts.data.id}</li>\n            <li className=\"product-price\">TWD.{posts.data.price}</li>\n            <li className=\"split1\"></li>\n            <li>\n              <ul className=\"product-color\">\n                <p>顏色｜</p>\n                {posts.data.colors.map((color, index) => (\n                  <li\n                    key={index}\n                    className={`colorblock ${\n                      selectedColor === color ? \"active\" : \"\"\n                    }`}\n                    style={{ backgroundColor: \"#\" + color.code }}\n                    onClick={() => handleColorClick(color)}\n                  ></li>\n                ))}\n              </ul>\n            </li>\n            <li>\n              <ul className=\"product-size\">\n                <p>尺寸｜</p>\n                {posts.data.sizes.map((size, index) => (\n                  <li\n                    key={index}\n                    className={`size ${\n                      selectedColor &&\n                      posts.data.variants.find(\n                        (variant) =>\n                          variant.color_code === selectedColor.code &&\n                          variant.size === size\n                      ).stock > 0\n                        ? \"\"\n                        : \"out-of-stock\"\n                    } ${selectedSize === size ? \"active\" : \"\"}`}\n                    onClick={() => {\n                      handleSizeClick(size);\n                      setSelectedQuantity(0);\n                    }}\n                  >\n                    {size}\n                  </li>\n                ))}\n              </ul>\n            </li>\n            <li>\n              <ul className=\"product-in-stock\">\n                <p>數量｜</p>\n                <div className=\"quantity-container\">\n                  <div\n                    className=\"minus\"\n                    type=\"button\"\n                    onClick={() => handleQuantityClick(\"minus\")}\n                  >\n                    -\n                  </div>\n                  <div className=\"quantity\">{selectedQuantity}</div>\n                  <div\n                    className=\"plus\"\n                    type=\"button\"\n                    onClick={() => handleQuantityClick(\"plus\", maxStock)}\n                  >\n                    +\n                  </div>\n                </div>\n              </ul>\n            </li>\n            <button\n              className=\"add-to-cart\"\n              onClick={handleAddtoCart}\n              style={{\n                cursor:\n                  selectedColor === undefined ||\n                  selectedSize === null ||\n                  selectedQuantity === 0\n                    ? \"not-allowed\"\n                    : \"pointer\",\n              }}\n            >\n              加入購物車\n            </button>\n            <div className=\"product-detail\">\n              {posts.data.note}\n              <br />\n              <br />\n              {posts.data.texture}\n              <br />\n              {posts.data.description.split(\"\\r\\n\")[0]}\n              <br />\n              {posts.data.description.split(\"\\r\\n\")[1]}\n              <br />\n              <br />\n              清洗：{posts.data.wash}\n              <br />\n              產地：{posts.data.place}\n            </div>\n          </ul>\n        </div>\n      </section>\n\n      <section className=\"product-bottom\">\n        <div className=\"more-info\">\n          <p className=\"more-info-p\">更多產品資訊</p>\n          <div className=\"split2\"></div>\n        </div>\n        <p className=\"description\">{posts.data.story}</p>\n        <div className=\"product-images-bottom\">\n          {posts.data.images.map((image, index) => (\n            <img\n              key={index}\n              className=\"product-image-bottom\"\n              src={image}\n              alt=\"product\"\n            />\n          ))}\n        </div>\n      </section>\n    </section>\n  );\n}\n\nexport default Product;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}