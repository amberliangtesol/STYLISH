{"ast":null,"code":"var _jsxFileName = \"/Users/amber/Front-End-Class-Batch19/stylish/src/components/Product.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Product(_ref) {\n  _s();\n  var _posts$data$variants$;\n  let {\n    setTotalProduct\n  } = _ref;\n  const urlParams = new URLSearchParams(window.location.search);\n  const id = urlParams.get(\"id\");\n  const productUrl = `https://api.appworks-school.tw/api/1.0/products/details?id=${id}`;\n  const [posts, setPosts] = useState();\n  const [selectedColor, setSelectedColor] = useState(null);\n  const [selectedSize, setSelectedSize] = useState(null);\n  const [selectedQuantity, setSelectedQuantity] = useState(0);\n  const localStorageStock = JSON.parse(localStorage.getItem(\"cart\")) || [];\n  // console.log(\"localStorageStock\",localStorageStock);\n  const maxStock = selectedColor !== null && selectedColor !== void 0 && selectedColor.code && selectedSize ? (_posts$data$variants$ = posts.data.variants.find(variant => variant.color_code === selectedColor.code && variant.size === selectedSize)) === null || _posts$data$variants$ === void 0 ? void 0 : _posts$data$variants$.stock : 0;\n\n  //console.log({ maxStock, selectedColor, selectedSize, selectedQuantity });\n\n  function handleColorClick(selectedColor) {\n    setSelectedColor(selectedColor);\n  }\n  function handleSizeClick(selectedSize) {\n    setSelectedSize(selectedSize);\n  }\n  function handleQuantityClick(plusOrMinus, maxStock) {\n    maxStock = Number(maxStock);\n    if (plusOrMinus === \"plus\" && selectedQuantity < (maxStock || 0)) {\n      setSelectedQuantity(selectedQuantity + 1);\n    } else if (plusOrMinus === \"minus\" && selectedQuantity > 0) {\n      setSelectedQuantity(selectedQuantity - 1);\n    }\n  }\n  function handleAddtoCart() {\n    if (selectedColor !== undefined && selectedSize !== null && selectedQuantity !== 0) {\n      //console.log(\"按下加入購物車\");\n      const item = {\n        id: posts.data.id,\n        img: posts.data.main_image,\n        name: posts.data.title,\n        price: posts.data.price,\n        color: selectedColor,\n        size: selectedSize,\n        qty: selectedQuantity\n      };\n      //console.log(\"item:\",item);\n\n      const cart = JSON.parse(localStorage.getItem(\"cart\")) || [];\n      const cartItemIndex = cart.findIndex(cartItem => cartItem.id === item.id && cartItem.color.code === item.color.code && cartItem.size === item.size);\n      let updatedCart;\n      if (cartItemIndex === -1) {\n        updatedCart = [...cart, item];\n      } else {\n        updatedCart = [...cart];\n        updatedCart[cartItemIndex].qty += item.qty;\n      }\n      localStorage.setItem(\"cart\", JSON.stringify(updatedCart));\n      const totalQuantity = updatedCart.reduce((total, i) => total + i.qty, 0);\n      setTotalProduct(totalQuantity);\n      const newPosts = {\n        ...posts\n      };\n      const variantIndex = newPosts.data.variants.findIndex(variant => variant.color_code === selectedColor.code && variant.size === selectedSize);\n      if (variantIndex !== -1) {\n        newPosts.data.variants[variantIndex].stock -= selectedQuantity;\n        // setMaxStock(newPosts.data.variants[variantIndex].stock);\n      }\n\n      setPosts(newPosts);\n    }\n    setSelectedColor(null);\n    setSelectedSize(null);\n    setSelectedQuantity(0);\n  }\n  useEffect(() => {\n    fetch(productUrl).then(response => response.json()).then(response => {\n      //console.log(\"response.data.vatriants\",response.data.variants);\n      const updatedVariants = response.data.variants.map(function (variant) {\n        const itemFromLocalstorage = localStorageStock.find(stock => stock.color.code === variant.color_code && stock.size === variant.size);\n        if (itemFromLocalstorage) {\n          let updatedStock = variant.stock - itemFromLocalstorage.qty;\n          return {\n            ...variant,\n            stock: updatedStock\n          };\n        } else {\n          return variant;\n        }\n      });\n      const updatedPosts = {\n        data: {\n          ...response.data,\n          variants: updatedVariants\n        }\n      };\n\n      //console.log({ updatedPosts })\n\n      setPosts(updatedPosts);\n    }).catch(err => {\n      console.log(err.message);\n    });\n  }, []);\n  if (posts === undefined) {\n    return null;\n  }\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"product\",\n    children: [/*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"product-top\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        className: \"product-image-top\",\n        src: posts.data.main_image,\n        alt: \"product\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"product-info\",\n        children: /*#__PURE__*/_jsxDEV(\"ul\", {\n          children: [/*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"product-name\",\n            children: posts.data.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"product-id\",\n            children: posts.data.id\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"product-price\",\n            children: [\"TWD.\", posts.data.price]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"split1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: /*#__PURE__*/_jsxDEV(\"ul\", {\n              className: \"product-color\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"\\u984F\\u8272\\uFF5C\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 159,\n                columnNumber: 17\n              }, this), posts.data.colors.map((color, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n                className: `colorblock ${selectedColor === color ? \"active\" : \"\"}`,\n                style: {\n                  backgroundColor: \"#\" + color.code\n                },\n                onClick: () => handleColorClick(color)\n              }, index, false, {\n                fileName: _jsxFileName,\n                lineNumber: 161,\n                columnNumber: 19\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: /*#__PURE__*/_jsxDEV(\"ul\", {\n              className: \"product-size\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"\\u5C3A\\u5BF8\\uFF5C\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 174,\n                columnNumber: 17\n              }, this), posts.data.sizes.map((size, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n                className: `size ${selectedColor && posts.data.variants.find(variant => variant.color_code === selectedColor.code && variant.size === size).stock > 0 ? \"\" : \"out-of-stock\"} ${selectedSize === size ? \"active\" : \"\"}`,\n                onClick: () => {\n                  handleSizeClick(size);\n                  setSelectedQuantity(0);\n                },\n                children: size\n              }, index, false, {\n                fileName: _jsxFileName,\n                lineNumber: 176,\n                columnNumber: 19\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 173,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            children: /*#__PURE__*/_jsxDEV(\"ul\", {\n              className: \"product-in-stock\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"\\u6578\\u91CF\\uFF5C\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 199,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"quantity-container\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"minus\",\n                  type: \"button\",\n                  onClick: () => handleQuantityClick(\"minus\"),\n                  children: \"-\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 201,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"quantity\",\n                  children: selectedQuantity\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 208,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"plus\",\n                  type: \"button\",\n                  onClick: () => handleQuantityClick(\"plus\", maxStock),\n                  children: \"+\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 209,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 200,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 198,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 197,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"add-to-cart\",\n            onClick: handleAddtoCart,\n            style: {\n              cursor: selectedColor === undefined || selectedSize === null || selectedQuantity === 0 ? \"not-allowed\" : \"pointer\"\n            },\n            children: \"\\u52A0\\u5165\\u8CFC\\u7269\\u8ECA\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"product-detail\",\n            children: [posts.data.note, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 235,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 236,\n              columnNumber: 15\n            }, this), posts.data.texture, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 238,\n              columnNumber: 15\n            }, this), posts.data.description.split(\"\\r\\n\")[0], /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 240,\n              columnNumber: 15\n            }, this), posts.data.description.split(\"\\r\\n\")[1], /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 242,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 243,\n              columnNumber: 15\n            }, this), \"\\u6E05\\u6D17\\uFF1A\", posts.data.wash, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 245,\n              columnNumber: 15\n            }, this), \"\\u7522\\u5730\\uFF1A\", posts.data.place]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 233,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"product-bottom\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"more-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"more-info-p\",\n          children: \"\\u66F4\\u591A\\u7522\\u54C1\\u8CC7\\u8A0A\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"split2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"description\",\n        children: posts.data.story\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"product-images-bottom\",\n        children: posts.data.images.map((image, index) => /*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"product-image-bottom\",\n          src: image,\n          alt: \"product\"\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 144,\n    columnNumber: 5\n  }, this);\n}\n_s(Product, \"FVejly3nrErcyO27Iweezw9uH7c=\");\n_c = Product;\nexport default Product;\nvar _c;\n$RefreshReg$(_c, \"Product\");","map":{"version":3,"names":["React","useState","useEffect","Product","setTotalProduct","urlParams","URLSearchParams","window","location","search","id","get","productUrl","posts","setPosts","selectedColor","setSelectedColor","selectedSize","setSelectedSize","selectedQuantity","setSelectedQuantity","localStorageStock","JSON","parse","localStorage","getItem","maxStock","code","data","variants","find","variant","color_code","size","stock","handleColorClick","handleSizeClick","handleQuantityClick","plusOrMinus","Number","handleAddtoCart","undefined","item","img","main_image","name","title","price","color","qty","cart","cartItemIndex","findIndex","cartItem","updatedCart","setItem","stringify","totalQuantity","reduce","total","i","newPosts","variantIndex","fetch","then","response","json","updatedVariants","map","itemFromLocalstorage","updatedStock","updatedPosts","catch","err","console","log","message","colors","index","backgroundColor","sizes","cursor","note","texture","description","split","wash","place","story","images","image"],"sources":["/Users/amber/Front-End-Class-Batch19/stylish/src/components/Product.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\n\n\nfunction Product({ setTotalProduct }) {\n  const urlParams = new URLSearchParams(window.location.search);\n  const id = urlParams.get(\"id\");\n  const productUrl = `https://api.appworks-school.tw/api/1.0/products/details?id=${id}`;\n  const [posts, setPosts] = useState();\n  const [selectedColor, setSelectedColor] = useState(null);\n  const [selectedSize, setSelectedSize] = useState(null);\n  const [selectedQuantity, setSelectedQuantity] = useState(0);\n  const localStorageStock = JSON.parse(localStorage.getItem(\"cart\")) || [];\n  // console.log(\"localStorageStock\",localStorageStock);\n  const maxStock =\n    selectedColor?.code && selectedSize\n      ? posts.data.variants.find(\n          (variant) =>\n            variant.color_code === selectedColor.code &&\n            variant.size === selectedSize\n        )?.stock\n      : 0;\n\n  //console.log({ maxStock, selectedColor, selectedSize, selectedQuantity });\n\n  function handleColorClick(selectedColor) {\n    setSelectedColor(selectedColor);\n  }\n\n  function handleSizeClick(selectedSize) {\n    setSelectedSize(selectedSize);\n  }\n\n  function handleQuantityClick(plusOrMinus, maxStock) {\n    maxStock = Number(maxStock);\n    if (plusOrMinus === \"plus\" && selectedQuantity < (maxStock || 0)) {\n      setSelectedQuantity(selectedQuantity + 1);\n    } else if (plusOrMinus === \"minus\" && selectedQuantity > 0) {\n      setSelectedQuantity(selectedQuantity - 1);\n    }\n  }\n\n  function handleAddtoCart() {\n    if (\n      selectedColor !== undefined &&\n      selectedSize !== null &&\n      selectedQuantity !== 0\n    ) {\n      //console.log(\"按下加入購物車\");\n      const item = {\n        id: posts.data.id,\n        img: posts.data.main_image,\n        name: posts.data.title,\n        price: posts.data.price,\n        color: selectedColor,\n        size: selectedSize,\n        qty: selectedQuantity,\n      };\n      //console.log(\"item:\",item);\n\n      const cart = JSON.parse(localStorage.getItem(\"cart\")) || [];\n\n      const cartItemIndex = cart.findIndex(\n        (cartItem) =>\n          cartItem.id === item.id &&\n          cartItem.color.code === item.color.code &&\n          cartItem.size === item.size\n      );\n\n      let updatedCart;\n      if (cartItemIndex === -1) {\n        updatedCart = [...cart, item];\n      } else {\n        updatedCart = [...cart];\n        updatedCart[cartItemIndex].qty += item.qty;\n      }\n\n      localStorage.setItem(\"cart\", JSON.stringify(updatedCart));\n\n      const totalQuantity = updatedCart.reduce((total, i) => total + i.qty, 0);\n      setTotalProduct(totalQuantity);\n\n      const newPosts = { ...posts };\n      const variantIndex = newPosts.data.variants.findIndex(\n        (variant) =>\n          variant.color_code === selectedColor.code &&\n          variant.size === selectedSize\n      );\n      if (variantIndex !== -1) {\n        newPosts.data.variants[variantIndex].stock -= selectedQuantity;\n        // setMaxStock(newPosts.data.variants[variantIndex].stock);\n      }\n      setPosts(newPosts);\n    }\n    setSelectedColor(null);\n    setSelectedSize(null);\n    setSelectedQuantity(0);\n  }\n\n  useEffect(() => {\n    fetch(productUrl)\n      .then((response) => response.json())\n      .then((response) => {\n        //console.log(\"response.data.vatriants\",response.data.variants);\n        const updatedVariants = response.data.variants.map(function (variant) {\n          const itemFromLocalstorage = localStorageStock.find(\n            (stock) =>\n              stock.color.code === variant.color_code &&\n              stock.size === variant.size\n          );\n\n          if (itemFromLocalstorage) {\n            let updatedStock = variant.stock - itemFromLocalstorage.qty;\n            return {\n              ...variant,\n              stock: updatedStock,\n            };\n          } else {\n            return variant;\n          }\n        });\n\n        const updatedPosts = {\n          data: {\n            ...response.data,\n            variants: updatedVariants,\n          },\n        };\n\n        //console.log({ updatedPosts })\n\n        setPosts(updatedPosts);\n      })\n      .catch((err) => {\n        console.log(err.message);\n      });\n  }, []);\n\n  if (posts === undefined) {\n    return null;\n  }\n\n\n  return (\n    <section className=\"product\">\n      <section className=\"product-top\">\n        <img\n          className=\"product-image-top\"\n          src={posts.data.main_image}\n          alt=\"product\"\n        />\n        <div className=\"product-info\">\n          <ul>\n            <li className=\"product-name\">{posts.data.title}</li>\n            <li className=\"product-id\">{posts.data.id}</li>\n            <li className=\"product-price\">TWD.{posts.data.price}</li>\n            <li className=\"split1\"></li>\n            <li>\n              <ul className=\"product-color\">\n                <p>顏色｜</p>\n                {posts.data.colors.map((color, index) => (\n                  <li\n                    key={index}\n                    className={`colorblock ${\n                      selectedColor === color ? \"active\" : \"\"\n                    }`}\n                    style={{ backgroundColor: \"#\" + color.code }}\n                    onClick={() => handleColorClick(color)}\n                  ></li>\n                ))}\n              </ul>\n            </li>\n            <li>\n              <ul className=\"product-size\">\n                <p>尺寸｜</p>\n                {posts.data.sizes.map((size, index) => (\n                  <li\n                    key={index}\n                    className={`size ${\n                      selectedColor &&\n                      posts.data.variants.find(\n                        (variant) =>\n                          variant.color_code === selectedColor.code &&\n                          variant.size === size\n                      ).stock > 0\n                        ? \"\"\n                        : \"out-of-stock\"\n                    } ${selectedSize === size ? \"active\" : \"\"}`}\n                    onClick={() => {\n                    handleSizeClick(size);\n                    setSelectedQuantity(0);\n                  }}>\n                    {size}\n                  </li>\n                ))}\n              </ul>\n            </li>\n            <li>\n              <ul className=\"product-in-stock\">\n                <p>數量｜</p>\n                <div className=\"quantity-container\">\n                  <div\n                    className=\"minus\"\n                    type=\"button\"\n                    onClick={() => handleQuantityClick(\"minus\")}\n                  >\n                    -\n                  </div>\n                  <div className=\"quantity\">{selectedQuantity}</div>\n                  <div\n                    className=\"plus\"\n                    type=\"button\"\n                    onClick={() => handleQuantityClick(\"plus\", maxStock)}\n                  >\n                    +\n                  </div>\n                </div>\n              </ul>\n            </li>\n            <button\n              className=\"add-to-cart\"\n              onClick={handleAddtoCart}\n              style={{\n                cursor:\n                  selectedColor === undefined ||\n                  selectedSize === null ||\n                  selectedQuantity === 0\n                    ? \"not-allowed\"\n                    : \"pointer\",\n              }}\n            >\n              加入購物車\n            </button>\n            <div className=\"product-detail\">\n              {posts.data.note}\n              <br />\n              <br />\n              {posts.data.texture}\n              <br />\n              {posts.data.description.split(\"\\r\\n\")[0]}\n              <br />\n              {posts.data.description.split(\"\\r\\n\")[1]}\n              <br />\n              <br />\n              清洗：{posts.data.wash}\n              <br />\n              產地：{posts.data.place}\n            </div>\n          </ul>\n        </div>\n      </section>\n\n      <section className=\"product-bottom\">\n        <div className=\"more-info\">\n          <p className=\"more-info-p\">更多產品資訊</p>\n          <div className=\"split2\"></div>\n        </div>\n        <p className=\"description\">{posts.data.story}</p>\n        <div className=\"product-images-bottom\">\n          {posts.data.images.map((image, index) => (\n            <img\n              key={index}\n              className=\"product-image-bottom\"\n              src={image}\n              alt=\"product\"\n            />\n          ))}\n        </div>\n      </section>\n    </section>\n  );\n}\n\nexport default Product;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}